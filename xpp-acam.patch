--- xpp-1.0/Makefile.am.orig	Sat Jan 27 01:17:37 2001
+++ xpp-1.0/Makefile.am	Thu Oct 30 16:37:10 2003
@@ -2,7 +2,8 @@
 
 bin_PROGRAMS = xpp
 
-xpp_SOURCES = mainwindow.fl mainwindow.cxx passworddialog.cxx cupshelper.cxx xpp.cxx xppmain.cxx inputslider.cxx mainwindow.h passworddialog.h xpp.h cupshelper.h inputslider.h
+EXTRA_DIST = mainwindow.fl
+xpp_SOURCES = mainwindow.cxx passworddialog.cxx cupshelper.cxx xpp.cxx xppmain.cxx inputslider.cxx mainwindow.h passworddialog.h xpp.h cupshelper.h inputslider.h
 xpp_LDFLAGS = $(all_libraries)
 
 # .fl must be added as suffix because otherwise .fl files are not compiled by
--- xpp-1.0/configure.in.orig	Sat Jan 27 01:17:37 2001
+++ xpp-1.0/configure.in	Thu Oct 30 17:03:26 2003
@@ -37,14 +37,6 @@
 AC_CHECK_LIB(Xext, main,,,$LIBS)
 dnl Replace `main' with a function in -lcups:
 dnl AC_CHECK_LIB(cups, main)
-dnl Replace `main' with a function in -lGL:
-AC_CHECK_LIB(GL, main)
-dnl Replace `main' with a function in -lGLU:
-AC_CHECK_LIB(GLU, main)
-dnl Search for static library 'libfltk.a':
-AC_PATH_PROG(LIBFLTKA,libfltk.a,-lfltk,/lib:/usr/lib:/usr/X11R6/lib:/usr/local/lib:/usr/local/lib/X11)
-dnl Add static FLTK lib if libfltk.a found otherwise dynamic FLTK:
-AC_CHECK_LIB(fltk, main,LIBS="$LIBFLTKA $LIBS",,$LIBS)
 dnl Replace `main' with a function in -lfltk:
 dnl AC_CHECK_LIB(fltk, main,,,$LIBS)
 dnl Replace `main' with a function in -lm:
@@ -63,25 +55,19 @@
 
 dnl =======Checks for CUPS==================================================
 
-AC_CHECK_LIB(socket,socket,
-if test "$uname" != "IRIX"; then
-	LIBS="-lsocket $LIBS"
-else
-	echo "Not using -lsocket since you are running IRIX."
-fi)
-AC_CHECK_LIB(nsl,gethostbyaddr,
-if test "$uname" != "IRIX"; then
-	LIBS="-lnsl $LIBS"
-else
-	echo "Not using -lnsl since you are running IRIX."
-fi)
+AC_SEARCH_LIBS(socket,socket)
+AC_SEARCH_LIBS(gethostbyaddr,nsl)
 
 AC_CHECK_LIB(cups,httpConnect)
 
+AC_LANG_PUSH(C++)
+AC_CHECK_LIB(fltk, main,,,$LIBS)
+AC_LANG_POP
+
 dnl Check for CUPSD
 AC_PATH_PROG(CUPSD,cupsd,,$PATH:/usr/sbin:/sbin:/usr/local/sbin)
 if test "$CUPSD" = ""; then
-        AC_MSG_ERROR(CUPS daemon not found, please install CUPS package (http://www.cups.org).)
+        AC_MSG_ERROR([CUPS daemon not found, please install CUPS package (http://www.cups.org).])
 fi
 
 dnl =======End of checks for CUPS===========================================
@@ -91,7 +77,7 @@
 dnl Check for FLUID (FLTK dialog generator)
 AC_PATH_PROG(FLUID,fluid,,$PATH:/usr/bin:/bin:/usr/local/bin)
 if test "$FLUID" = ""; then
-        AC_MSG_ERROR(The dialog editor/generator of FLTK, fluid must be installed. Check your FLTK installation.)
+        AC_MSG_ERROR([The dialog editor/generator of FLTK, fluid must be installed. Check your FLTK installation.])
 fi
 
 dnl =======End of checks for FLTK===========================================
